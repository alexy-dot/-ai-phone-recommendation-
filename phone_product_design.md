# 智能手机/电脑参数对比与对话推荐系统 产品设计文档 (v2.0)

## 一、产品定位
本产品面向电商平台用户，聚焦手机与电脑两大品类。它利用**大型语言模型 (LLM)** 的强大自然语言理解能力，结合**自动化更新的商品数据库**与**可视化参数对比**，旨在帮助用户高效、精准地选购最适合自己的机型，提升决策效率与满意度。

## 二、核心用户需求
- **自然语言交互**: 能够用日常、模糊的语言描述需求，系统能像真人导购一样理解并提供建议。
- **动态、准确的数据**: 能查询到最新款的手机型号，且价格、参数信息准确。
- **直观量化对比**: 对比多款机型时，能提供图形化的性能雷达图，一目了然。
- **智能推荐与解释**: 不仅给出推荐结果，更能用通俗易懂的语言解释推荐原因。
- **个性化体验**: 系统能记住用户的偏好，提供持续的个性化服务。

## 三、功能模块设计

### 1. 自动化数据采集与存储
- **网络爬虫 (Scraper)**: 定时任务（如每日执行），从主流电商平台（如京东、淘宝）、厂商官网抓取在售机型的结构化与非结构化数据。
- **多渠道价格追踪**: 对同一商品，采集并记录不同渠道的价格，便于比价。
- **数据清洗与入库**: 对抓取的数据进行清洗、去重、结构化处理，并存入**数据库 (如 SQLite/PostgreSQL)**。

### 2. LLM赋能的意图识别与对话管理
- **核心意图理解**: 利用大模型API (如 Gemini) 解析用户输入的自然语言，精准识别**核心需求** (如拍照、游戏)、**预算范围** (包括模糊描述)、**品牌偏好**及**负面偏好** (如“不要XX品牌”, “担心网络卡顿”)。
- **多轮上下文追踪**: 维持长期对话记忆，理解用户在多轮对话中补充、修改的需求。
- **智能澄清**: 当用户需求模糊时，由LLM生成符合逻辑、场景的澄清问题，避免机械式重复提问。

### 3. 多维参数矩阵化与推荐引擎
- **动态向量空间**: 基于数据库中的全量机型，动态计算各参数的归一化范围，构建覆盖**性能、影像、续航、便携、价格、外观、发热控制、网络稳定性**等维度的向量空间。
- **混合推荐策略**:
    - **向量匹配**: 将LLM解析出的用户需求向量，与数据库中的手机参数向量进行加权相似度计算。
    - **LLM决策辅助**: 将初步筛选的Top N结果交由LLM，结合用户更细微的偏好（如“希望系统流畅稳定”）进行二次排序和评估。

### 4. 可视化对比与自然语言响应
- **生成对比图表**: 当用户需要对比几款特定手机时，系统调用图表库 (如 Matplotlib)，动态生成**性能雷达图**，并将图片返回给用户。
- **生成自然语言报告**: 对比结果不仅有图，还附有LLM生成的自然语言摘要，解读图表，并给出最终的加权分析建议。
- **生成推荐解释**: 所有推荐结果都由LLM生成自然、个性化的推荐理由，而非模板式文案。

## 四、技术架构建议 (v2.0)

- **数据采集层**:
  - **工具**: Scrapy / BeautifulSoup
  - **任务**: 定时执行网络爬虫，抓取多源数据。
- **数据存储层**:
  - **工具**: SQLite / PostgreSQL / MongoDB
  - **任务**: 存储清洗、结构化后的商品数据。
- **服务层 (Service Layer)**:
  - **LLM服务**: 封装与大模型API (如 Gemini API) 的交互逻辑。
  - **可视化服务**: 封装生成对比图表的功能。
- **核心逻辑层 (Core Logic)**:
  - **数据处理器**: 参数清洗、归一化、向量化。
  - **推荐引擎**: 实现向量相似度计算与排序算法。
  - **对话管理器**: 管理对话状态，协调LLM、数据库和推荐引擎。
- **接口层 (API Layer)**:
  - **工具**: FastAPI / Flask
  - **任务**: 提供HTTP接口，供前端或其他客户端调用。
- **前端交互**:
  - **形式**: 命令行工具 / Web界面 / App
  - **任务**: 负责用户交互、展示推荐结果和可视化图表。 